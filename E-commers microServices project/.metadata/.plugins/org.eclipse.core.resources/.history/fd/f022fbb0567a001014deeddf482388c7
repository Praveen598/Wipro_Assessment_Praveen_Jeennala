package com.zomatodeliveryagent;

package com.zomatodeliveryagent;

import java.util.Map;
 
import org.springframework.web.bind.annotation.PatchMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
 
import lombok.RequiredArgsConstructor;
 
@RestController
@RequiredArgsConstructor
@RequestMapping("/api/v1/zomato/delivery")
public class conrtollerss {
 
	private final ZomatoAgentService zomatoAgentDeliveryService;
	
	
	@PatchMapping("/getLocationOfDeliveryAgent")
	public Map<String,String> getUpdatedLocation() throws InterruptedException
	{	
		int range=100;
		
		while(range>0)
		{
			zomatoAgentDeliveryService.updateDeleveryAgentLocation(Math.random()+","+Math.random());
			Thread.sleep(2000);
			range--;
		}
		return Map.of("message","Location Updated every Second");
		
	}
	
	
	
}
 
